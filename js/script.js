var marks = [

  {
    name: "Kevin de León",
    title: "California Senate President pro Tempore",
    email: "senator.deleon@senate.ca.gov",
    twitter: "@kdeleon"
  },

  {
    name: "Toni Atkins",
    title: "California Speaker of the Assembly",
    email: "assemblymember.atkins@asm.ca.gov",
    twitter: "@toniatkins"
  }

];

var parts = {

  brain: {
    name: "Luz, age 65, San Diego",
    twitter: "." + marks[0].twitter + " " + marks[1].twitter + ": having a stroke, you shouldn't need to worry if Medi-Cal will cover your treatment. ",
    facebook: "After Luz was rushed to the ER with a stroke and operated on, she learned her surgeon didn't accept Medi-Cal. Join the campaign and take action to fully fund Medi-Cal for California.",
    image: "images/luz-a.jpg",
    email: "When Luz Arellano was rushed to a San Diego emergency room with a stroke, that was only the start of her problems.<br><br>While she was in recovery, Luz discovered the neurosurgeon who performed her surgery did not accept Medi-Cal – and Luz's family had to pay for the surgery out of pocket.<br><br>On top of that, she began having complications from the surgery – including vision problems – but she is facing a five-month wait to be seen by a specialist.<br><br>Medi-Cal patients like Luz face real problems finding specialists who can accept Medi-Cal and provide care in a timely manner. Low Medi-Cal reimbursement rates means fewer doctors can afford to take Medi-Cal, and that means longer wait times and health complications for people like Luz.<br><br>Please support fully funding Medi-Cal, and help Luz and others like her get the care they need.<br><br>Sincerely,<br><br>"
  },

  heart: {
    name: "Ricardo, age 22, Fresno, Laid Off - Electronics Recycling Worker",
    twitter: "Ricardo has a heart condition, but because he has Medi-Cal he couldn't get his medication. " + marks[0].twitter + " " + marks[1].twitter,
    facebook: "Ricardo was born with a heart murmur, but because he is insured by Medi-Cal, he couldn't get the treatment and medications he needs. Join the campaign and take action to fully fund Medi-Cal for California.",
    image: "images/ricardo-p.jpg",
    email: "Can you imagine knowing you have a ticking time bomb in your chest, with no way to make sure it doesn't go off?<br><br>That's what Ricardo Ponce in Fresno dealt with every day for eight months.<br><br>Ricardo was born with a heart murmur, and he saw a doctor regularly for treatment and medication. But when he turned 21 and became a Medi-Cal beneficiary, all that ended. For eight months, he could not find a primary doctor who was accepting new Medi-Cal patients, forcing his mother to pay out of pocket for his treatment and medications.<br><br>Medi-Cal's low payment rates to healthcare providers leave patients like Ricardo with nowhere to turn for care, and at risk of serious health problems.<br><br>Please support fully funding Medi-Cal, and help people like Ricardo get the care they need.<br><br>Sincerely,<br><br>"
  },

  knee: {
    name: "Lourdes, age 45, Compton",
    twitter: "In an accident, you shouldn't need to travel further for an ER that takes Medi-Cal " + marks[0].twitter + " " + marks[1].twitter,
    facebook: "After a car accident, Lourdes was turned away from the closest hospital, because they couldn't accept her Medi-Cal coverage. Join the campaign and take action to fully fund Medi-Cal",
    image: "images/lourdes.jpg",
    email: "After a car accident, the last thing you should have to worry about is whether the nearest emergency room can give you the treatment you need. But Lourdes Ortiz from Compton found herself in just that situation.<br><br>Lourdes was rushed to the closest hospital, but the hospital couldn't take her because they weren't able to accept Medi-Cal patients. And even after she got care at another hospital, Lourdes' troubles weren't over.<br><br>The accident tore a ligament in her knee, and Lourdes has been waiting almost six months to see a specialist and get the care that will help get her back on her feet. The wait hasn't just meant daily pain for Lourdes – it's meant losing her job.<br><br>Medi-Cal's low payment rates to healthcare providers mean fewer doctors and hospitals are able to provide treatment to Medi-Cal patients, and that means delays in care that can cause serious complications.<br><br>Please support fully funding Medi-Cal, and help people like Lourdes get the care they need.<br><br>Sincerely,<br><br>"
  },

  stomach: {
    name: "Jose, age 54, Oakland, Handyman",
    twitter: "No one should have a scheduled surgery cancelled just because their insurance is Medi-Cal " + marks[0].twitter + " " + marks[1].twitter,
    facebook: "Jose has been turned away from his scheduled hernia surgery twice because he's covered by Medi-Cal. Join the campaign and take action to fully fund Medi-Cal for California.",
    image: "images/jose-b.jpg",
    email: "Surgery is scary, but being turned away at the last minute for a surgery you need is even scarier.<br><br>Just ask Jose Berumen from Oakland, because he's been through it twice.<br><br>Jose is a handyman who had hernia surgery scheduled over a year ago – but when he switched from private insurance to Medi-Cal, his surgery and ongoing treatment were cancelled.<br><br>After months of searching, Jose found another provider who would take his Medi-Cal coverage, although he would have to wait two months for his surgery. But when Jose showed up for that appointment, he learned that they did not accept Medi-Cal patients after all.<br><br>When Medi-Cal doesn't fully fund healthcare providers, it's patients like Jose who suffer. Jose is still in pain, and still waiting to find a surgeon who is able to accept Medi-Cal.<br><br>Please support fully funding Medi-Cal, and help Jose and people like him get the care they need.<br><br>Sincerely,<br><br>"
  },

  lungs: {
    name: "Kristi, age 32, Fresno, Law Student & Law Clerk",
    twitter: "No one should have to rely on expired asthma medicine because they're covered by Medi-Cal. " + marks[0].twitter + " " + marks[1].twitter,
    facebook: "Imagine being unable to breathe because you can't use your Medi-Cal coverage to see a doctor for three months. Join the campaign and take action to fully fund Medi-Cal for California.",
    image: "images/kristi-j.jpg",
    email: "Would you take expired medication? What if your only other choice was no medication at all?<br><br>Kristi Johnson in Fresno had to face that choice for nearly six months.<br><br>Kristi is a law student with asthma, and she is covered by Medi-Cal. When she called to make an appointment with her doctor, Kristi discovered the doctor did not accept Medi-Cal patients. It took nearly three months for Kristi just to get an appointment with another doctor to renew her asthma prescriptions, and in the meantime she relied on expired medication to treat her condition.<br><br>Doctors like Kristi's can't afford to take Medi-Cal patients because of California's low reimbursement rates. That means patients with chronic conditions like Kristi find themselves unable to get their medication.<br><br>Please support fully funding Medi-Cal, and help people like Kristi to get the care they need.<br><br>Sincerely,<br><br>"
  },

  foot: {
    name: "Tioy, age 19, City of Ione",
    twitter: "When Medi-Cal patients like Tioy have to wait for care, it means higher costs %26 worse health. " + marks[0].twitter + " " + marks[1].twitter,
    facebook: "When does an ingrown toenail turn into emergency surgery? When Medi-Cal patients like Tioy can't get timely care. Join the campaign and take action to fully fund Medi-Cal for California.",
    image: "images/tioy.jpg",
    email: "When does a simple ingrown toenail turn into emergency surgery? When Medi-Cal patients are denied timely care.<br><br>Tioy Mulvil from the city of Ione, California is a Medi-Cal patient with autism.<br><br>When Tioy's mother noticed his ingrown toenail, she worked to get him treatment right away – but he had to wait three months for what should have been a routine procedure. While they were waiting for the appointment, the nail became infected and Tioy had to have emergency surgery on his foot.<br><br>When Medi-Cal patients are forced to wait for care, it means more complicated procedures that cost the state more of our limited healthcare dollars – and it means worse health and longer recovery times for patients like Tioy.<br><br>Please support fully funding Medi-Cal, and help Tioy and others like him get the care they need.<br><br>Sincerely,<br><br>"
  },

  leftArm: {
    name: "Jenevy, age 9, Fresno",
    twitter: "9-year-old Jenevy went months w/o care for a dangerous allergy, b/c she's covered by Medi-Cal " + marks[0].twitter + " " + marks[1].twitter,
    facebook: "It took 9-year-old Jenevy more than three months to see a specialist who diagnosed her with a life-threatening allergy. Join the campaign and take action to fully fund Medi-Cal for California.",
    image: "images/jenevy.jpg",
    email: "For more than three months, nine-year-old Jenevy Guzman had no treatment for what turned out to be a potentially life-threatening allergy.<br><br>Jenevy went to the doctor with a rash on her arm that was so bad it was beginning to blister and spread to her face, eyes, and across her body. But even though she got a referral to a dermatologist, Jenevy still had to wait more than three months for an appointment.<br><br>Now she has been diagnosed with an allergy so severe that she needs to take an epi-pen with her wherever she goes.<br><br>It's hard for Medi-Cal patients like Jenevy to get an appointment with a specialist because low Medi-Cal reimbursement rates mean few specialists are able to afford to see or treat them. That puts kids like Jenevy at serious risk when their conditions go undiagnosed and untreated.<br><br>Please support fully funding Medi-Cal, and help kids like Jenevy get the care they need.<br><br>Sincerely,<br><br>"
  },

  rightHand: {
    name: "Gilberto, age 57, Oakland, Mariachi",
    twitter: "How can musician Gilberto work when he has to wait months for an arthritis appointment? " + marks[0].twitter + " " + marks[1].twitter,
    facebook: "As a musician, Gilberto needs his hands in order to work, but because he has Medi-Cal coverage, he has to wait months for an appointment to get his arthritis medicine. Join the campaign and take action to fully fund Medi-Cal for California.",
    image: "images/gilberto.jpg",
    email: "How can a musician work if he can't use his hands?<br><br>Gilberto Uribe is a mariachi in Oakland, but he suffers from arthritis and diabetes, which causes terrible pain in his hands.<br><br>Gilberto has been waiting three months for an appointment with a doctor who is able to accept Medi-Cal patients so he can get the care he needs to manage his conditions and continue working as a musician.<br><br>Low Medi-Cal payment rates to doctors make it hard for patients like Gilberto to get timely care because there are too few doctors who can accept Medi-Cal. That means chronic conditions get worse, which impacts quality of life and the ability of Californians to stay employed.<br><br>Please support fully funding Medi-Cal to help people like Gilberto get the care they need.<br><br>Sincerely,<br><br>"
  }

};

var part;

$(document).ready( function() {


  $("#next").click( function() {

    part = $("#bodyparts").val();
    $("#body-parts-selection").hide();

    // Filling in the div with email text
    $("#my-text-edit").html(parts[part].email);

    $("#social-buttons").css("display","block");
    $( "#emailForm" ).css("display","block");

    // Adding the Medi-Cal patient to the subject line
    var emailSubject = parts[part].name.split(",");
    emailSubject = emailSubject[0];
    $( "#person" ).val(emailSubject);


    $("#facebook").click( function() {
          FB.ui({
              method: 'feed',
              link: 'http://www.medi-calmatters.org/splash',
              name: parts[part].name,
              picture: "http://seiuuhw.org/medi-cal-operation/" + parts[part].image,
              description: parts[part].facebook
              }, function(response){});
    });

    $("#twitter").click( function() {
        var twitterUrl = "http://twitter.com/intent/tweet?",
            text = "text=" + parts[part].twitter;
            //add shortened url for images
            hashtags = "&hashtags=MediCalMatters,CADem15"

        var width  = 575,
        height = 400,
        left   = ($(window).width()  - width)  / 2,
        top    = ($(window).height() - height) / 2,
        url    = twitterUrl + text + hashtags,
        opts   = 'status=1' +
                 ',width='  + width  +
                 ',height=' + height +
                 ',top='    + top    +
                 ',left='   + left;

        window.open(url, 'twitter', opts);

      });


      $("#emailForm").submit( function() {
        $("#emailForm").css("display","none");
        var editText = document.getElementById("my-text-edit").innerHTML,
        emailText = editText.replace(/<br><br>/g,"\r\n\r\n");
        document.getElementById("my-text").value = emailText;

        var startOver = $("<a />", {
          href : "http://seiuuhw.org/medi-cal-operation/",
          text : "Start the game again",
          class : "btn btn-lg btn-primary btn-block form-signin"
        });

        $("main").append("<p>Your email has been sent</p>").append(startOver);

      });


  });

});
